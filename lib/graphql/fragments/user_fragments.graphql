# Import dependencies
#import "./media_fragments.graphql"
#import "./person_fragments.graphql"

# User fragments for authentication and profile management

fragment UserBasicInfo on User {
  id
  email
  confirmedAt
  confirmationSentAt
  lastSignInAt
  lastSignInIp
  currentSignInAt
  currentSignInIp
  locale
  defaultActor {
    id
    preferredUsername
    name
  }
  disabled
  role
  provider
  mediaSize
}

fragment UserWithSettings on User {
  ...UserBasicInfo
  settings {
    timezone
    notificationOnDay
    notificationEachWeek
    notificationBeforeEvent
    notificationPendingParticipation
    notificationPendingMembership
    groupNotifications
    location {
      range
      geohash
      name
    }
  }
}

fragment UserFull on User {
  ...UserWithSettings
  actors {
    ...ActorBasicInfo
  }
}

fragment ActorBasicInfo on Actor {
  id
  preferredUsername
  name
  domain
  summary
  url
  suspended
  avatar {
    ...MediaBasicInfo
  }
}

fragment PersonInfo on Person {
  ...ActorBasicInfo
  banner {
    ...MediaBasicInfo
  }
  feedTokens {
    token
  }
  organizedEvents {
    total
  }
  participations {
    total
  }
  memberships {
    total
  }
  follows {
    total
  }
  followingCount
  followersCount
  user {
    id
    email
    role
  }
}

fragment LoginResponse on Login {
  accessToken
  refreshToken
  user {
    ...UserFull
  }
}

fragment RefreshedTokenResponse on RefreshedToken {
  accessToken
  refreshToken
}

fragment DeletedObjectResponse on DeletedObject {
  id
} 