# Reset Password Mutation - Field Selection for mobilizon_api Compatibility
#
# This operation resets a user's password using a token sent via email
# and returns the same Login type as the regular login mutation.
# The actors field is included to support user profile mapping functionality.
#
# KNOWN LIMITATION: Similar to the login mutation, the Mobilizon server's
# resetPassword mutation may not properly preload the actors association,
# resulting in actors being returned with null field values.
# 
# Workaround: Use the loggedPerson query after authentication to fetch
# the complete actor/profile data if needed.

mutation ResetPassword($token: String!, $password: String!, $locale: String) {
  resetPassword(token: $token, password: $password, locale: $locale) {
    accessToken
    refreshToken
    user {
      ...resetPassword_UserFields
    }
  }
}

fragment resetPassword_UserFields on User {
  id
  email
  role
  locale
  confirmedAt
  actors {
    id
    preferredUsername
    name
    summary
    domain
    type
    url
    local
    suspended
  }
}

